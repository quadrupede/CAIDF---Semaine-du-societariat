var APP={};!function(){APP={timerHelp:null,initialize:function(){},initPage:function(){var t=new MobileDetect(window.navigator.userAgent);!t.phone()&&$(".home").length&&($("html").width(3*$(window).width()),$("body").width(3*$(window).width())),$(window).width()/$(window).height()<1.5&&$("body").addClass("portrait"),t.tablet()||t.phone()||!$(".home").length||($("body").addClass("no-touch"),e.modules.animation.initAnimation(),$("body").mousewheel(function(t,n){this.scrollLeft-=30*n,t.preventDefault(),clearTimeout(e.timerHelp),$(".section-1__left__content__help").addClass("hidden")}),e.timerHelp=setTimeout(e.displayHelp,1e4)),e.modules.jeu.initJeu(),$(".videos__videos").slick(),$(".section-1__left__content__btn").click(e.scrollToLeft),e.initPopin(),$("body").imagesLoaded(e.setVideos),$("body").imagesLoaded(e.getUrlInfos)},initPopin:function(){$(".agence__adresse").each(function(){$(this).slideUp(0)}),$(".agence h4").click(function(){$(".agence__adresse").each(function(){$(this).slideUp(600)}),$(this).parent().find(".agence__adresse").slideDown(600)}),$(".section-1__right__content__btn").click(e.openPopin),$(".popin-agences__background").click(e.closePopin)},openPopin:function(){$(".popin-agences").removeClass("hidden"),$(".popin-agences__background").removeClass("hidden")},closePopin:function(){$(".popin-agences").addClass("hidden"),$(".popin-agences__background").addClass("hidden")},getUrlInfos:function(){var e=window.location.hash;e=e.split("#")[1],"jeu"==e&&$("html,body").scrollLeft(10*$(window).width())},setVideos:function(){$(".videos__video iframe").each(function(e){var t=this;setTimeout(function(){$(t).attr("src",$(t).attr("data-src"))},500*e)})},scrollToLeft:function(t){t.preventDefault(),$("html,body").animate({scrollLeft:$("#section-1").width()-$(window).width()+20},600,"easeInOutCubic"),clearTimeout(e.timerHelp)},displayHelp:function(){$(".section-1__left__content__help").removeClass("hidden")}};var e=APP}(),function(){APP.modules=APP.modules||{},APP.modules.animation={initAnimation:function(){var e=new ScrollMagic.Controller({vertical:!1});new ScrollMagic.Scene({triggerElement:"#section-1",triggerHook:"onLeave",duration:"125%",offset:$(window).width()/10*4}).setTween(".section-1",{left:"25%",ease:Linear.easeNone}).addTo(e),new ScrollMagic.Scene({triggerElement:"#section-2",triggerHook:"onLeave",duration:"125%"}).setTween(".section-2",{left:"25%",ease:Linear.easeNone}).addTo(e),new ScrollMagic.Scene({triggerElement:"#section-3",triggerHook:"onLeave",duration:"125%"}).setTween(".section-3",{left:"25%",ease:Linear.easeNone}).addTo(e),new ScrollMagic.Scene({triggerElement:"#section-1",triggerHook:"onLeave",duration:"60%"}).setTween(".section-1__background",{width:"155vw",ease:Linear.easeNone}).addTo(e),new ScrollMagic.Scene({triggerElement:"#section-2",triggerHook:"onEnter",duration:"150%",offset:$(window).width()/2}).setTween(".bouger__background",{left:"0%",ease:Linear.easeNone}).addTo(e),new ScrollMagic.Scene({triggerElement:"#section-2",triggerHook:"onEnter",duration:"100%",offset:$(window).width()/2}).setTween(".bouger__cloud1",{left:"-5%",ease:Linear.easeNone}).addTo(e),new ScrollMagic.Scene({triggerElement:"#section-2",triggerHook:"onEnter",duration:"100%",offset:$(window).width()/2}).setTween(".bouger__cloud2",{left:"60%",ease:Linear.easeNone}).addTo(e),new ScrollMagic.Scene({triggerElement:"#section-3",triggerHook:.1}).setClassToggle(".videos__btn","visible").addTo(e),new ScrollMagic.Scene({triggerElement:"#section-4",triggerHook:.1}).setClassToggle(".jeu__top--start__square-1","jeu__top--start__square-1--rotate").addTo(e),new ScrollMagic.Scene({triggerElement:"#section-4",triggerHook:"onEnter",duration:"100%"}).setTween(".jeu__top--start",{backgroundPosition:"13% center",ease:Linear.easeNone}).addTo(e)}};APP.modules.animation}(),function(){APP.modules=APP.modules||{},APP.modules.jeu={currentScreen:0,currentWord:"",timerHelp:null,initJeu:function(){e.initScreen(),$(".jeu__bottom--start__btn").click(e.nextScreen)},initScreen:function(){var t=0;$(".jeu--ecrans").each(function(){t++;for(var e=$(this).attr("data-word"),n=0;n<e.length;n++)" "!=e.charAt(n)?$(this).find(".jeu__bottom__letters").append('<div class="jeu__bottom__letter"><input class="jeu__bottom__letter__input jeu--'+t+"__bottom__letter__input--"+n+'" type="text"  maxlength="1" data-num="'+n+'" data-letter="'+e.charAt(n)+'"></div>'):$(this).find(".jeu__bottom__letters").append('<div class="jeu__bottom__letter jeu__bottom__letter--space" data-letter="'+e.charAt(n)+'"><input class="jeu__bottom__letter__input jeu--'+t+"__bottom__letter__input--"+n+' jeu__bottom__letter__input--space" type="text" value="'+e.charAt(n)+'" disabled="true" maxlength="1" data-num="'+n+'" data-letter="'+e.charAt(n)+'"></div>')}),$(".jeu__bottom__letter__input").focus(e.onInputFocus),$(".jeu__bottom__btn--indice").click(e.showIndice)},showIndice:function(){$(this).addClass("hidden"),$(this).parent().find(".jeu__bottom__indice").removeClass("hidden")},onInputChange:function(t){switch(t.keyCode){case 32:$(this).val("");break;default:if(""!=$(this).val()){for(var n=Number($(this).attr("data-num")),o=n+1;$(".jeu--"+e.currentScreen+"__bottom__letter__input--"+o).hasClass("jeu__bottom__letter__input--space");)o++;$(".jeu--"+e.currentScreen+"__bottom__letter__input--"+o).length&&($(".jeu--"+e.currentScreen+"__bottom__letter__input--"+o).focus(),$(this).unbind("keyup"),$(this).unbind("keydown")),e.checkAnswer(),clearTimeout(e.timerHelp)}}},checkAnswer:function(t){for(var n=!0,o=0;o<e.currentWord.length;o++){var i=$(".jeu--"+e.currentScreen).find(".jeu--"+e.currentScreen+"__bottom__letter__input--"+o).val();e.currentWord.charAt(o)!=i&&(n=!1)}n&&e.nextScreen()},onBackSpace:function(t){if(8==t.keyCode){$(this).val("");var n=Number($(this).attr("data-num"));if(0!=n){for(var o=n-1;$(".jeu--"+e.currentScreen+"__bottom__letter__input--"+o).hasClass("jeu__bottom__letter__input--space");)o--;$(".jeu--"+e.currentScreen+"__bottom__letter__input--"+o).focus(),$(this).unbind("keyup"),$(this).unbind("keydown")}}},onInputFocus:function(){$(this).val(""),$(this).keyup(e.onInputChange),$(this).keydown(e.onBackSpace)},nextScreen:function(){e.currentScreen++,$(".jeu--current").addClass("jeu--before"),$(".jeu--current").removeClass("jeu--current"),$(".jeu--"+e.currentScreen).removeClass("jeu--after"),$(".jeu--"+e.currentScreen).addClass("jeu--current"),$(".jeu--"+e.currentScreen).hasClass("jeu--end")||($(".jeu--"+e.currentScreen).find(".jeu--"+e.currentScreen+"__bottom__letter__input--0").focus(),e.currentWord=$(".jeu--"+e.currentScreen).attr("data-word")),e.timerHelp=setTimeout(e.displayHelp,1e4)},displayHelp:function(){$(".jeu__bottom__help").removeClass("hidden")}};var e=APP.modules.jeu}();